#!/usr/bin/env bash

# Function to display information about a specific subdomain
display_subdomain_info() {
  local domain=$1
  local subdomain=$2
  # Use the dig command to retrieve the DNS record for the subdomain
  local record=$(dig +short "${subdomain}.${domain}")
  # Check if the record is an A record (IPv4 address) or a AAAA record (IPv6 address)
  if [[ "$record" =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]; then
    record_type="A"
  elif [[ "$record" =~ ^[0-9a-f:]+$ ]]; then
    record_type="AAAA"
  else
    record_type="unknown"
  fi
  # Print the information about the subdomain
  echo "The subdomain ${subdomain} is a ${record_type} record and points to ${record}"
}

# Main function
main() {
  # Check if the domain and subdomain parameters are provided
  if [[ $# -eq 2 ]]; then
    # Display information about the specific subdomain
    display_subdomain_info "$1" "$2"
  elif [[ $# -eq 1 ]]; then
    # Display information about the default subdomains
    display_subdomain_info "$1" "www"
    display_subdomain_info "$1" "lb-01"
    display_subdomain_info "$1" "web-01"
    display_subdomain_info "$1" "web-02"
  else
    # Print an error message if the parameters are not provided
    echo "Error: domain and subdomain parameters are required"
  fi
}

# Call the main function
main "$@"

